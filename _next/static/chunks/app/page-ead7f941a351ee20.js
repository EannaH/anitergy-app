(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{30552:(e,t,a)=>{Promise.resolve().then(a.bind(a,97853))},47982:(e,t,a)=>{"use strict";a.d(t,{M:()=>d,db:()=>o,j:()=>i});var s=a(49904),r=a(27058),n=a(14565);let l=(0,s.Wp)({apiKey:"AIzaSyCg7yFjUejqgh21gLK2sbeviBcwGjyaXYY",authDomain:"energy-tracker-app.firebaseapp.com",projectId:"energy-tracker-app",storageBucket:"energy-tracker-app.firebasestorage.app",messagingSenderId:"626832007055",appId:"1:626832007055:web:3dad3ddb4f578cb80ab5fa"}),o=(0,r.aU)(l),i=(0,n.xI)(l),d=new n.HF},97853:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(95155),r=a(47982),n=a(14565),l=a(12115);function o(){let[e,t]=(0,l.useState)(null);(0,l.useEffect)(()=>{r.j.onAuthStateChanged(e=>{t(e)})},[]);let a=async()=>{try{await (0,n.df)(r.j,r.M)}catch(e){console.error("Login error:",e)}},o=async()=>{try{await (0,n.CI)(r.j)}catch(e){console.error("Logout error:",e)}};return(0,s.jsx)("div",{className:"text-center",children:e?(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-gray-700 mb-2",children:["Hello, ",e.displayName,"!"]}),(0,s.jsx)("button",{onClick:o,className:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600",children:"Sign Out"})]}):(0,s.jsx)("button",{onClick:a,className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",children:"Sign in with Google"})})}var i=a(27058),d=a(58581),c=a(15255),m=a(12800),g=a(66963),h=a(27112),x=a(94973),u=a(16161),y=a(394),p=a(23021),j=a(48173),b=a.n(j),f=a(44556),v=a(90457);function N(){let[e,t]=(0,l.useState)(0),[a,o]=(0,l.useState)(""),[j,N]=(0,l.useState)(""),[w,S]=(0,l.useState)([]),[E,k]=(0,l.useState)(!1),[D,L]=(0,l.useState)(null),[C,F]=(0,l.useState)([]),[K,_]=(0,l.useState)(null),[A,H]=(0,l.useState)([]),[T,I]=(0,l.useState)([]),[O,W]=(0,l.useState)([]),[M,Y]=(0,l.useState)([]),[G,B]=(0,l.useState)([]),[R,J]=(0,l.useState)(8),[U,P]=(0,l.useState)(0),[z,q]=(0,l.useState)(8),[X,Z]=(0,l.useState)(0),Q=(0,l.useCallback)(async e=>{try{let t=(0,i.rJ)(r.db,"users",e,"energy_logs"),a=(0,i.P)(t,(0,i.My)("timestamp","asc")),s=(await (0,i.GG)(a)).docs.map(e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.seconds)?new Date(1e3*e.data().timestamp.seconds):new Date}});F(s);let n=new Date().toISOString().split("T")[0],l=(0,i.H9)(r.db,"users",e,"daily_energy",n),o=await (0,i.x7)(l);if(o.exists()){let e=o.data();J(e.sleep_hours||8),P(e.deficit||0),Z(e.fatigueLoad||0),console.log("✅ Sleep Data Retrieved:",e),V(e.start_energy||8,e.deficit||0,e.fatigueLoad||0)}else console.log("❌ No sleep data found for today."),J(8),P(0),V(8,0,0);let d={},c={};s.forEach(e=>{let t=e.timestamp.toISOString().split("T")[0],a=e.timestamp.toLocaleDateString("en-US",{weekday:"long"});d[t]||(d[t]={total:0,count:0}),d[t].total+=e.energy,d[t].count+=1,c[a]||(c[a]={total:0,count:0}),c[a].total+=e.energy,c[a].count+=1});let m=Object.keys(d).map(e=>({date:e,avgEnergy:d[e].total/d[e].count}));H(m);let g=Object.keys(c).map(e=>({day:e,avgEnergy:c[e].total/c[e].count}));Y(g);let h={};s.forEach(e=>{e.emotions&&Array.isArray(e.emotions)&&e.emotions.forEach(e=>{h[e]||(h[e]=0),h[e]+=1})});let x=Object.keys(h).map(e=>({name:e,value:h[e]}));B(x)}catch(e){console.error("❌ Error fetching logs:",e)}},[]);(0,l.useEffect)(()=>{let e=(0,n.hg)(r.j,e=>{L(e),e&&Q(e.uid)});return()=>e()},[Q]),(0,l.useEffect)(()=>{console.log("⚡ Current Energy:",z)},[z]);let V=(e,t,a)=>{let s=new Date,r=new Date;r.setHours(7,0,0,0),q(Math.max(0,e-.2*a-Math.max(0,(s-r)/36e5)*(.5+t/2*.1)))},$=async s=>{if(s.preventDefault(),!D){console.error("User not authenticated");return}k(!0);try{if(K){let t=(0,i.H9)(r.db,"users",D.uid,"energy_logs",K);await (0,i.mZ)(t,{energy:e,situation:a,trigger:j,emotions:w,timestamp:(0,i.O5)()}),_(null)}else await (0,i.gS)((0,i.rJ)(r.db,"users",D.uid,"energy_logs"),{energy:e,situation:a,trigger:j,emotions:w,timestamp:(0,i.O5)()});await et(D.uid,R),t(0),o(""),N(""),S([]),J(8),Q(D.uid)}catch(e){console.error("Error saving log:",e)}k(!1)},ee=async e=>{if(D)try{await (0,i.kd)((0,i.H9)(r.db,"users",D.uid,"energy_logs",e)),Q(D.uid)}catch(e){console.error("Error deleting log:",e)}},et=async(e,t)=>{if(!e)return console.error("User not authenticated");try{let a=new Date().toISOString().split("T")[0],s=(0,i.H9)(r.db,"users",e,"daily_energy",a),n=await (0,i.x7)(s),l=0,o=0;n.exists()&&(l=n.data().deficit||0,o=n.data().fatigueLoad||0);let d=t<8?l+(8-t):Math.max(0,l-(t-8)),c=o+(d>10?.2*d:0),m=Math.max(3,8-c);await (0,i.BN)(s,{sleep_hours:t,start_energy:m,deficit:d,fatigueLoad:c}),console.log("✅ Sleep Data Saved:",{sleepHours:t,startEnergy:m,newDeficit:d,newFatigueLoad:c}),P(d)}catch(e){console.error("❌ Error saving sleep data:",e)}};return(0,s.jsxs)("div",{className:"max-w-lg mx-auto p-4 bg-white shadow-lg rounded-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:K?"Edit Your Energy Log":"Log Your Energy"}),(0,s.jsxs)("form",{onSubmit:$,className:"space-y-4 bg-gray-100 p-4 rounded-md shadow-md",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Energy Level (-10 to +10):"}),(0,s.jsx)("input",{type:"number",min:"-10",max:"10",value:e,onChange:e=>t(parseInt(e.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Situation:"}),(0,s.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"E.g., Work Meeting"})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Trigger:"}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",placeholder:"E.g., Boss"})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Emotions:"}),(0,s.jsxs)("select",{multiple:!0,value:w,onChange:e=>S(Array.from(e.target.selectedOptions,e=>e.value)),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",children:[(0,s.jsxs)("optgroup",{label:"\uD83D\uDD0B Energy-Boosting Emotions",children:[(0,s.jsx)("option",{value:"Joy",children:"Joy – Brings lightness and excitement"}),(0,s.jsx)("option",{value:"Gratitude",children:"Gratitude – Reinforces a sense of abundance"}),(0,s.jsx)("option",{value:"Love",children:"Love – Strengthens emotional connections"}),(0,s.jsx)("option",{value:"Pride",children:"Pride – Boosts confidence and self-worth"}),(0,s.jsx)("option",{value:"Excitement",children:"Excitement – Energizes and motivates action"}),(0,s.jsx)("option",{value:"Relief",children:"Relief – Signals the removal of stress"}),(0,s.jsx)("option",{value:"Contentment",children:"Contentment – A calm, sustainable energy state"}),(0,s.jsx)("option",{value:"Hope",children:"Hope – Creates motivation and resilience"}),(0,s.jsx)("option",{value:"Amusement",children:"Amusement – Generates light-hearted energy"}),(0,s.jsx)("option",{value:"Confidence",children:"Confidence – Increases self-efficacy and drive"})]}),(0,s.jsxs)("optgroup",{label:"⚡ Energy-Draining Emotions",children:[(0,s.jsx)("option",{value:"Anger",children:"Anger – High-energy but emotionally exhausting"}),(0,s.jsx)("option",{value:"Frustration",children:"Frustration – A mental drain from unresolved obstacles"}),(0,s.jsx)("option",{value:"Fear",children:"Fear – Triggers survival responses and tension"}),(0,s.jsx)("option",{value:"Sadness",children:"Sadness – Lowers motivation and creates fatigue"}),(0,s.jsx)("option",{value:"Guilt",children:"Guilt – Creates a self-punishing cycle"}),(0,s.jsx)("option",{value:"Shame",children:"Shame – Depletes self-esteem and mental clarity"}),(0,s.jsx)("option",{value:"Loneliness",children:"Loneliness – Causes emotional depletion over time"}),(0,s.jsx)("option",{value:"Disgust",children:"Disgust – Drains energy through aversion"}),(0,s.jsx)("option",{value:"Jealousy",children:"Jealousy – Mixes insecurity and resentment, taxing mental energy"}),(0,s.jsx)("option",{value:"Regret",children:"Regret – Mentally exhausting if ruminated on"})]})]})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Hours Slept:"}),(0,s.jsx)("input",{type:"number",min:"0",max:"12",value:R,onChange:e=>J(parseInt(e.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md p-2"})]}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 rounded-md text-white ".concat(K?"bg-yellow-500 hover:bg-yellow-600":"bg-blue-500 hover:bg-blue-600"),disabled:E,children:E?"Saving...":K?"Update Log":"Log Energy"})]}),(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded-md shadow-md mt-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Sleep & Fatigue Overview"}),(0,s.jsxs)("p",{className:"mt-2",children:[(0,s.jsx)("strong",{children:"\uD83D\uDCC9 Sleep Debt:"}),(0,s.jsxs)("span",{className:U>4?"text-red-500 font-bold":"text-green-500",children:[U," hours"]})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"⚡ Fatigue Load:"}),(0,s.jsx)("span",{className:void 0!==X&&X>5?"text-red-500 font-bold":"text-green-500",children:void 0!==X?X.toFixed(1):"0.0"})]}),(0,s.jsx)("p",{className:"mt-2 text-gray-500",children:U>4?"\uD83D\uDEA8 High Sleep Debt! Your energy will drain faster.":"✅ Sleep levels are within a healthy range."}),(0,s.jsx)("p",{className:"text-gray-500",children:void 0!==X&&X>5?"⚠️ Chronic fatigue detected. Long-term recovery is needed.":"\uD83D\uDCAA You're managing fatigue well!"})]}),(0,s.jsx)("h2",{className:"text-xl font-bold mt-6",children:"Sleep vs. Energy Trends"}),C.length>0?(0,s.jsx)(d.u,{width:"100%",height:250,className:"mt-4",children:(0,s.jsxs)(y.E,{data:C,children:[(0,s.jsx)(c.d,{strokeDasharray:"3 3"}),(0,s.jsx)(m.W,{dataKey:"timestamp",tickFormatter:e=>new Date(e).toLocaleDateString()}),(0,s.jsx)(g.h,{}),(0,s.jsx)(h.m,{}),(0,s.jsx)(p.y,{dataKey:"energy",fill:"#ff4500",name:"Energy Level"}),(0,s.jsx)(p.y,{dataKey:"sleep_hours",fill:"#8884d8",name:"Sleep Hours"})]})}):(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"No sleep vs. energy data available."}),(0,s.jsx)("h2",{className:"text-xl font-bold mt-6",children:"Weekly Sleep Debt & Fatigue Trends"}),C.length>0?(0,s.jsx)(d.u,{width:"100%",height:250,className:"mt-4",children:(0,s.jsxs)(x.b,{data:C,children:[(0,s.jsx)(c.d,{strokeDasharray:"3 3"}),(0,s.jsx)(m.W,{dataKey:"timestamp",tickFormatter:e=>new Date(e).toLocaleDateString()}),(0,s.jsx)(g.h,{}),(0,s.jsx)(h.m,{}),(0,s.jsx)(u.N,{type:"monotone",dataKey:"deficit",stroke:"#ff0000",strokeWidth:2,name:"Sleep Debt (hrs)"}),(0,s.jsx)(u.N,{type:"monotone",dataKey:"fatigueLoad",stroke:"#ff7300",strokeWidth:2,name:"Fatigue Load"})]})}):(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"No weekly trend data available."}),(0,s.jsx)("h2",{className:"text-xl font-bold mt-6",children:"Your Energy Trends"}),C.length>0?(0,s.jsx)(d.u,{width:"100%",height:250,className:"mt-4",children:(0,s.jsxs)(x.b,{data:C,children:[(0,s.jsx)(c.d,{strokeDasharray:"3 3"}),(0,s.jsx)(m.W,{dataKey:"timestamp",tickFormatter:e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,s.jsx)(g.h,{domain:[-10,10]}),(0,s.jsx)(h.m,{labelFormatter:e=>new Date(e).toLocaleString()}),(0,s.jsx)(u.N,{type:"monotone",dataKey:"energy",stroke:"#8884d8",strokeWidth:2})]})}):(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"No energy logs found."}),(0,s.jsx)("h2",{className:"text-xl font-bold mt-6",children:"Daily Average Energy Trends"}),A.length>0?(0,s.jsx)(d.u,{width:"100%",height:250,className:"mt-4",children:(0,s.jsxs)(y.E,{data:A,children:[(0,s.jsx)(c.d,{strokeDasharray:"3 3"}),(0,s.jsx)(m.W,{dataKey:"date"}),(0,s.jsx)(g.h,{domain:[-10,10]}),(0,s.jsx)(h.m,{}),(0,s.jsx)(p.y,{dataKey:"avgEnergy",fill:"#82ca9d"})]})}):(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"No trend data available."}),(0,s.jsx)("h2",{className:"text-xl font-bold mt-6",children:"Weekly Average Energy Trends"}),T.length>0?(0,s.jsx)(d.u,{width:"100%",height:250,className:"mt-4",children:(0,s.jsxs)(y.E,{data:T,children:[(0,s.jsx)(c.d,{strokeDasharray:"3 3"}),(0,s.jsx)(m.W,{dataKey:"period"}),(0,s.jsx)(g.h,{domain:[-10,10]}),(0,s.jsx)(h.m,{}),(0,s.jsx)(p.y,{dataKey:"avgEnergy",fill:"#ffa500"})]})}):(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"No weekly trend data available."}),(0,s.jsx)("h2",{className:"text-xl font-bold mt-6",children:"Monthly Average Energy Trends"}),O.length>0?(0,s.jsx)(d.u,{width:"100%",height:250,className:"mt-4",children:(0,s.jsxs)(y.E,{data:O,children:[(0,s.jsx)(c.d,{strokeDasharray:"3 3"}),(0,s.jsx)(m.W,{dataKey:"period"}),(0,s.jsx)(g.h,{domain:[-10,10]}),(0,s.jsx)(h.m,{}),(0,s.jsx)(p.y,{dataKey:"avgEnergy",fill:"#ff4500"})]})}):(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"No monthly trend data available."}),(0,s.jsx)("h2",{className:"text-xl font-bold mt-6",children:"Smart Insights"}),M.length>0?(0,s.jsx)("ul",{className:"mt-4 p-4 bg-gray-100 rounded-md",children:M.map(e=>(0,s.jsxs)("li",{className:"mb-2",children:[(0,s.jsxs)("strong",{children:[e.day,":"]})," ",e.avgEnergy>0?"You tend to feel energized (+".concat(e.avgEnergy.toFixed(1),")"):"You tend to feel drained (".concat(e.avgEnergy.toFixed(1),")")]},e.day))}):(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"No insights available yet."}),(0,s.jsx)("h2",{className:"text-xl font-bold mt-6",children:"Most Frequent Emotions"}),G.length>0?(0,s.jsx)(d.u,{width:"100%",height:250,className:"mt-4",children:(0,s.jsxs)(f.r,{children:[(0,s.jsx)(v.F,{data:G,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0}),(0,s.jsx)(h.m,{})]})}):(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"No emotion data available."}),(0,s.jsx)("h2",{className:"text-xl font-bold mt-6",children:"Your Logged Entries"}),C.length>0?(0,s.jsxs)("table",{className:"w-full mt-4 border-collapse border border-gray-300",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Energy"}),(0,s.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Situation"}),(0,s.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Trigger"}),(0,s.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Emotions"}),(0,s.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:C.map(e=>(0,s.jsxs)("tr",{className:"text-center",children:[(0,s.jsx)("td",{className:"border px-4 py-2 ".concat(e.energy<0?"text-red-500":"text-green-500"),children:e.energy}),(0,s.jsx)("td",{className:"border px-4 py-2",children:e.situation}),(0,s.jsx)("td",{className:"border px-4 py-2",children:e.trigger||"No trigger"}),(0,s.jsx)("td",{className:"border px-4 py-2",children:e.emotions&&e.emotions.length>0?e.emotions.join(", "):"No emotions"}),(0,s.jsxs)("td",{className:"border px-4 py-2 space-x-2",children:[(0,s.jsx)(b(),{href:"/edit/".concat(e.id),passHref:!0,children:(0,s.jsx)("button",{className:"bg-yellow-500 text-white px-2 py-1 rounded",children:"✏️ Edit"})}),(0,s.jsx)("button",{onClick:()=>ee(e.id),className:"bg-red-500 text-white px-2 py-1 rounded",children:"❌ Delete"})]})]},e.id))})]}):(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"No logs found."})]})}function w(){return(0,s.jsxs)("div",{className:"max-w-lg mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Energy Tracker"}),(0,s.jsx)(o,{}),(0,s.jsx)(N,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,888,861,725,441,587,358],()=>t(30552)),_N_E=e.O()}]);